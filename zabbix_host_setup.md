# üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ö–æ—Å—Ç–∞ –≤ Zabbix

## üåê –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Ubuntu WSL —Ö–æ—Å—Ç–∞ –≤ Zabbix

### 1. –í–æ–π–¥–∏—Ç–µ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- URL: `http://185.219.81.180`
- –õ–æ–≥–∏–Ω: Admin (–∏–ª–∏ –≤–∞—à –ª–æ–≥–∏–Ω)
- –ü–∞—Ä–æ–ª—å: [–≤–∞—à –ø–∞—Ä–æ–ª—å]

### 2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ö–æ—Å—Ç–æ–≤
```
–ú–µ–Ω—é ‚Üí Configuration ‚Üí Hosts ‚Üí Create host
```

### 3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ö–æ—Å—Ç–∞:

**–í–∫–ª–∞–¥–∫–∞ "Host":**
- **Host name:** `ubuntu-wsl-rafael`
- **Visible name:** `Ubuntu WSL Rafael (Windows 10)`
- **Groups:** `Linux servers` (–≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞)

**Interfaces:**
- **Type:** Agent
- **IP address:** `–í–ê–®_–í–ù–ï–®–ù–ò–ô_IP` –∏–ª–∏ `127.0.0.1`
- **DNS name:** (–æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º)
- **Port:** `10050`

### 4. –î–æ–±–∞–≤—å—Ç–µ —à–∞–±–ª–æ–Ω—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–í–∫–ª–∞–¥–∫–∞ "Templates":**
- –ù–∞–∂–º–∏—Ç–µ **"Select"**
- –ù–∞–π–¥–∏—Ç–µ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ: `Linux by Zabbix agent`
- –ù–∞–∂–º–∏—Ç–µ **"Add"**

### 5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ö–æ—Å—Ç
- –ù–∞–∂–º–∏—Ç–µ **"Add"** –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
1. `Configuration ‚Üí Hosts`
2. –ù–∞–π–¥–∏—Ç–µ —Ö–æ—Å—Ç `ubuntu-wsl-rafael`
3. –í –∫–æ–ª–æ–Ω–∫–µ **Availability** –¥–æ–ª–∂–Ω—ã –∑–∞–≥–æ—Ä–µ—Ç—å—Å—è –∑–µ–ª–µ–Ω—ã–µ –∏–∫–æ–Ω–∫–∏:
   - **Z** (Zabbix agent) - –∑–µ–ª–µ–Ω—ã–π
   - **S** (SNMP) - —Å–µ—Ä—ã–π (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
   - **I** (IPMI) - —Å–µ—Ä—ã–π (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

### –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∞–≥–µ–Ω—Ç–∞
sudo tail -f /var/log/zabbix/zabbix_agentd.log

# –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø–∏—Å–∏ —Ç–∏–ø–∞:
# "received configuration data from server at [185.219.81.180]"
```

## üîç –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ IP (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

–ï—Å–ª–∏ Zabbix —Å–µ—Ä–≤–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ WSL –ø–æ 127.0.0.1:

### –°–ø–æ—Å–æ–± 1: –£–∑–Ω–∞—Ç—å IP WSL
```bash
wsl hostname -I
```

### –°–ø–æ—Å–æ–± 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Windows IP
```bash
ipconfig | findstr IPv4
```

### –°–ø–æ—Å–æ–± 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤ Windows
```powershell
# –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏–∏ (–∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞)
netsh interface portproxy add v4tov4 listenport=10050 listenaddress=0.0.0.0 connectport=10050 connectaddress=172.x.x.x
```

## üìä –ß—Ç–æ –±—É–¥–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å—Å—è:

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞ `Linux by Zabbix agent`:

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:
- **CPU:** –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- **Memory:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
- **Disk:** —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–∞—Ö
- **Network:** —Å–µ—Ç–µ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- **Processes:** –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### –°–ª—É–∂–±—ã:
- **SSH:** –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å SSH
- **System:** –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- **Zabbix agent:** —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∞–º–æ–≥–æ –∞–≥–µ–Ω—Ç–∞

### –¢—Ä–∏–≥–≥–µ—Ä—ã (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è):
- –í—ã—Å–æ–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ CPU (>80%)
- –ú–∞–ª–æ —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ (<20%)
- –ú–∞–ª–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ (<20%)
- –ê–≥–µ–Ω—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

## üéØ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:
```bash
# –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä
sudo nano /etc/zabbix/zabbix_agentd.conf

# –î–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É:
UserParameter=custom.test,echo "Hello from Ubuntu WSL!"
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–≥–µ–Ω—Ç:
```bash
sudo systemctl restart zabbix-agent
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:
```bash
zabbix_agentd -t custom.test
```

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ —Ö–æ—Å—Ç –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã:**
```bash
sudo ss -tuln | grep 10050
```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
```bash
sudo tail -f /var/log/zabbix/zabbix_agentd.log
```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
```bash
sudo cat /etc/zabbix/zabbix_agentd.conf | grep -E "Server|Hostname"
```

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º:**
```bash
telnet 185.219.81.180 10051
```

### –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:
- **"host not found"** ‚Üí —Ö–æ—Å—Ç –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- **"connection refused"** ‚Üí –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é/—Ñ–∞–π—Ä–≤–æ–ª–æ–º
- **"permission denied"** ‚Üí –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

## üìà –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Ubuntu WSL –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

üéâ **–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í–∞—à DevOps –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≥–æ—Ç–æ–≤!** 